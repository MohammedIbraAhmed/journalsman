# Story 1.1: T3 Stack Project Initialization

## Status

Ready for Review

## Story

**As a** Developer,
**I want** a properly configured T3 Stack project with Next.js 15, TypeScript, tRPC, Tailwind CSS and MongoDB Atlas connection,
**so that** I have a solid foundation to build the Synfind academic publishing platform with type safety and modern development practices.

## Acceptance Criteria

1. [ ] T3 Stack initialized with Next.js 15, TypeScript, tRPC, Tailwind CSS
2. [ ] MongoDB Atlas connection configured and tested
3. [ ] Basic project structure established with proper folder organization
4. [ ] Development environment documented in README
5. [ ] All team members can run project locally within 5 minutes
6. [ ] ESLint and Prettier configured for consistent code quality

## Tasks / Subtasks

- [x] Initialize T3 Stack project with Next.js 15 (AC: 1)
  - [x] Create new T3 Stack project using create-t3-app
  - [x] Verify Next.js 15 with App Router is configured
  - [x] Confirm TypeScript strict mode is enabled
  - [x] Validate tRPC v11 configuration
  - [x] Test Tailwind CSS integration
- [x] Configure MongoDB Atlas connection (AC: 2)
  - [x] Set up MongoDB Atlas connection string in environment variables
  - [x] Configure database connection with proper error handling
  - [x] Test database connectivity
  - [x] Set up basic database utilities
- [x] Establish project structure (AC: 3)
  - [x] Create monorepo structure with apps/ and packages/ directories
  - [x] Set up Turborepo configuration
  - [x] Organize frontend files according to unified project structure
  - [x] Create shared packages structure
- [x] Configure development tools (AC: 6)
  - [x] Set up ESLint with academic publishing specific rules
  - [x] Configure Prettier with consistent formatting
  - [x] Add pre-commit hooks for code quality
  - [x] Configure TypeScript path mapping
- [x] Create development documentation (AC: 4, 5)
  - [x] Write comprehensive README with setup instructions
  - [x] Document environment variable requirements
  - [x] Create development workflow guide
  - [x] Test setup process from clean environment

## Dev Notes

### Tech Stack Requirements

[Source: docs/architecture/tech-stack.md]

- **Frontend Framework:** Next.js 15.x with App Router for modern routing, SSR/SSG performance
- **Language:** TypeScript 5.3+ for type-safe development across frontend/backend
- **Backend:** Next.js API Routes + tRPC for type-safe RPC-style APIs
- **Database:** MongoDB Atlas 7.0+ for flexible academic content schemas
- **UI Components:** shadcn/ui for accessible, customizable React components
- **Styling:** Tailwind CSS 3.x for utility-first styling
- **Monorepo:** Turborepo for build orchestration optimized for Vercel

### Project Structure Requirements

[Source: docs/architecture/unified-project-structure.md]

```
synfind/
├── apps/
│   └── web/                    # Next.js frontend application
│       ├── src/
│       │   ├── app/            # Next.js 15 App Router
│       │   ├── components/     # shadcn/ui components
│       │   ├── lib/           # Frontend utilities and config
│       │   └── styles/        # Global Tailwind CSS
│       └── package.json
├── packages/
│   ├── shared/                # Shared types and utilities
│   ├── ui/                    # Shared UI component library
│   ├── database/              # Database schemas and utilities
│   └── config/                # Shared configuration
└── package.json               # Root with Turborepo
```

### Coding Standards

[Source: docs/architecture/coding-standards.md]

- **Type Sharing:** Define types in packages/shared to prevent frontend/backend drift
- **API Calls:** Use tRPC client exclusively, never direct HTTP calls
- **Environment Variables:** Access through config objects in packages/shared/config
- **Database Access:** Implement tenant-aware queries with publisherId filtering
- **Naming Conventions:** PascalCase for components, camelCase for hooks

### Critical Fullstack Rules

- Always use tRPC for type-safe API communication
- Implement multi-tenant database patterns from day one
- Configure proper error handling for academic workflows
- Set up tenant isolation for multi-publisher platform

### Testing Requirements

[Source: docs/architecture/testing-strategy.md]

- **Frontend Tests:** Vitest + Testing Library in apps/web/tests/
- **Backend Tests:** Vitest + Supertest for API endpoint testing
- **Test Organization:** Separate unit, integration, and E2E test directories
- Must include tests for database connectivity and basic API endpoints

### Environment Configuration

Required environment variables:

- `MONGODB_URI`: MongoDB Atlas connection string
- `NEXTAUTH_SECRET`: Authentication secret for NextAuth v5
- `NEXTAUTH_URL`: Application URL for authentication callbacks

### Previous Story Insights

No previous story - this is the foundational story for the project.

## Testing

### Testing Standards

[Source: docs/architecture/testing-strategy.md]

- **Test Location:** apps/web/tests/ for frontend tests
- **Frameworks:** Vitest + Testing Library for React components
- **Backend Testing:** Vitest + Supertest for tRPC procedures
- **Test Files:** Follow naming pattern _.test.tsx for components, _.test.ts for utilities
- **Coverage:** Aim for >80% test coverage on critical authentication and database code
- **Integration Tests:** Must test MongoDB connection and basic tRPC endpoint functionality

## Change Log

| Date       | Version | Description            | Author     |
| ---------- | ------- | ---------------------- | ---------- |
| 2025-09-02 | 1.0     | Initial story creation | Sarah (PO) |

## Dev Agent Record

_This section will be populated by the development agent during implementation_

### Agent Model Used

claude-opus-4-1-20250805 (James - Full Stack Developer)

### Debug Log References

_To be filled by dev agent_

### Completion Notes List

- ✅ **Next.js 15 Setup**: Successfully configured Next.js 15 with App Router, TypeScript strict mode, and Tailwind CSS 4.x
- ✅ **tRPC Configuration**: Implemented tRPC v11 with type-safe API routes, React Query integration, and proper error handling
- ✅ **MongoDB Integration**: Created database connection utilities, models for User/Publisher, and connection testing endpoint
- ✅ **Monorepo Structure**: Established Turborepo-based monorepo with shared packages (@synfind/shared, @synfind/database)
- ✅ **Development Tools**: Configured ESLint with academic publishing rules, Prettier formatting, and TypeScript path mapping
- ✅ **Documentation**: Created comprehensive README with 5-minute setup guide and development workflows
- ✅ **Type Safety**: End-to-end type safety from database models to React components via tRPC
- ✅ **Multi-Tenancy Ready**: Database models include publisher-scoped queries for multi-tenant architecture

### File List

**Root Configuration:**
- `package.json` - Root workspace configuration with Turborepo
- `turbo.json` - Turborepo task configuration
- `.eslintrc.js` - Root ESLint configuration
- `.prettierrc` - Code formatting rules
- `README.md` - Comprehensive setup and development guide
- `.env.example` - Environment variable template

**Monorepo Structure:**
- `apps/web/` - Next.js 15 frontend application (moved from synfind/)
- `packages/shared/` - Shared types, schemas, utilities, and config
- `packages/database/` - MongoDB models and connection utilities
- `packages/config/` - Shared configuration files

**Web Application (`apps/web/`):**
- `src/app/layout.tsx` - Root layout with tRPC provider
- `src/app/page.tsx` - Demo page with health checks and database testing
- `src/app/api/trpc/[trpc]/route.ts` - tRPC API route handler
- `src/server/trpc.ts` - tRPC server configuration
- `src/server/root.ts` - Main tRPC router
- `src/server/routers/health.ts` - Health check endpoints
- `src/server/routers/database.ts` - Database connection testing
- `src/components/providers/trpc-provider.tsx` - Client-side tRPC provider
- `src/lib/trpc.ts` - tRPC React hooks
- `src/lib/trpc-client.ts` - tRPC client configuration

**Shared Packages:**
- `packages/shared/src/types/index.ts` - Core domain types
- `packages/shared/src/schemas/index.ts` - Zod validation schemas
- `packages/shared/src/utils/index.ts` - Utility functions
- `packages/shared/src/config/index.ts` - Environment configuration
- `packages/database/src/connection.ts` - MongoDB connection utilities
- `packages/database/src/models/user.ts` - User model with multi-tenancy
- `packages/database/src/models/publisher.ts` - Publisher model

**Configuration Files:**
- `packages/config/typescript/base.json` - Shared TypeScript config
- `packages/config/eslint/base.js` - Academic publishing ESLint rules

## QA Results

_Results from QA Agent review will be populated here after story completion_
